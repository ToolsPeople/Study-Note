# 代码块

* 代码块又称为初始化块，属于类中的成员，类似于方法，将逻辑语句封装在方法体中。但和方法不同，没有方法名，没有返回，没有参数，只有方法体，而且不用通过对象或类显式调用，而是加载类时，或创建对象时隐式调用。

* 基本语法

  [修饰符]{

  ​	代码

  }；

1. 修饰符可写可不写，写的话只能写static。
2. ;号可写可不写。

* 代码块的好处：

1. 相当于另外一种形式的构造器，对构造器的补充机制，可以做初始化的操作。
2. 使用地方：如果多个构造器中都有重复的语句，可以抽取到初始化块中，提高代码的重用性。

## 代码块的使用细节

1. static代码块也叫静态代码块，作用就是对类进行初始化，而且它随着类的加载而执行，并且只会执行一次。如果是普通代码块，每创建一个对象，就执行一次。

2. 类什么时候被加载：
   * 创建对象实例。
   * 创建子类的对象实例，父类也会被加载，且先加载父类的
   * 使用类的静态成员，静态方法。
   
3. 普通的代码块，在创建对象实例时，会被隐式的调用。被创建一次，就会被调用一次。如果只是使用类的静态成员时，普通代码块并不会执行。

4. 创建一个对象时，<u>一个类</u>调用顺序是：(特指一个类中的顺序，如果是子父类，还是静态优先，接着按照 父类 —>子类 ，代码块 ， 构造器 )
   * 调用静态代码块和静态属性初始化(静态代码块和静态属性初始化调用的优先级一样，如果由多个静态代码块和多个静态变量初始化，则按他们定义的顺序调用)
   * 调用普通代码块和普通属性的初始化(普通代码块和普通属性初始化调用的优先级一样，如果由多个普通代码块和多个普通变量初始化，则按他们定义的顺序调用)
   * 调用构造方法
   
5. 构造器的最前面其实隐含了super()和调用普通代码块，静态相关的代码块，属性初始化，在类加载时，就执行完毕，因此是优先于构造器和普通代码块执行的。

   ```java
   class A{
   	public A(){
   		super();
   		//调用普通代码块
   		System.out.println("ok");		
   	}
   }
   ```

6. 对于4和5的总结，创建子类时，他们的静态代码块，静态属性初始化，普通代码块，普通属性初始化，构造方法的调用顺序：

   * 父类的静态代码块和静态属性
   * 子类的静态代码块和静态属性
   * 父类的普通代码块和普通属性初始化
   * 父类的构造方法
   * 子类的普通代码块和普通属性初始化
   * 子类的构造方法

   以上的代码块和属性的顺序按照定义时的顺序，优先级一样

7. 静态代码块只能直接调用静态成员，普通代码块可以调用任意成员，这一点之前的笔记里写过。

   

### 总结

* 静态代码块调用的情况：

1. 创建对象实例
2. 创建子类的对象实例，父类也会被加载，且先加载父类的
3. 使用类的静态成员，静态方法

* 普通代码块的调用：

1. 创建对象的时候(简易理解为普通代码块是构造器的补充，构造器被调用的时候就会被隐式调用)
2. 创建子类的对象实例，父类也会被加载，且先加载父类的

* 两者唯一的区别就是：

  静态代码块可以由静态成员或者静态方法调用，且静态代码块只能加载一次。









